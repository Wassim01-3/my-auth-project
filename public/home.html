<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <title>GreenTunisia - Protect Tunisia's Environment</title>
  <link rel="icon" type="image/png" href="/images/fav/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/images/fav/favicon.svg" />
  <link rel="shortcut icon" href="/images/fav/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/fav/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="GreenTunisia" />
  <link rel="manifest" href="/images/fav/site.webmanifest" />
  <link rel="stylesheet" href="css/stylehome.css">
  <link rel="stylesheet" type="text/css" href="css/style.css" media="all">
  <meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8">
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="css/style3.css" media="all">
  <link href="https://fonts.googleapis.com/css?family=Slabo+27px" rel="stylesheet">
  <style>
    /* Add this CSS to ensure the icon and text are aligned */
    .dropdown-content a {
      display: flex;
      align-items: center; /* Vertically center the icon and text */
      gap: 10px; /* Add space between the icon and text */
    }

    /* Styles for the welcome section */
    #welcome-section {
      margin: 50px 0;
      opacity: 0; /* Initially hidden */
      transform: translateY(20px); /* Slightly shifted down */
      transition: opacity 1s ease, transform 1s ease; /* Smooth transition */
    }

    #welcome-section.visible {
      opacity: 1; /* Fully visible */
      transform: translateY(0); /* Move to original position */
    }

    .welcome-text {
      font-family: 'Slabo 27px', serif; /* Match the font of the page */
      font-size: 18px; /* Adjust as needed */
      line-height: 1.6;
      color: #333; /* Adjust as needed */
    }

    .welcome-text-part1 {
      flex: 0 0 35%; /* First part takes 35% of the width */
      margin-left: 5%; /* Margin as requested */
    }

    .welcome-text-part2 {
      width: 90%; /* Second part takes full width */
      margin-top: 3px; /* Space between the two parts */
      margin-left: 5%;
    }

    .welcome-video {
      flex: 1; /* Video takes the remaining space */
      margin-right: 5%; /* Margin as requested */
    }

    .welcome-video video {
      width: 100%; /* Make video responsive */
      border-radius: 20px; /* Great border radius */
    }

    .flex-container {
      display: flex; /* Flexbox for the first part and video */
      align-items: flex-start; /* Align items to the top */
      gap: 20px; /* Space between text and video */
    }

    /* Footer Styles */
    footer {
      background-color: #009900; /* Replace with the color of the Sign In button */
      padding: 20px 0; /* Add some padding */
      text-align: center; /* Center the text */
      color: white; /* Text color */
      font-family: 'Slabo 27px', serif; /* Match the font of the page */
      font-size: 18px; /* Adjust as needed */
      position: relative; /* Ensure footer is positioned correctly */
      width: 100%; /* Full width */
      bottom: 0; /* Stick to the bottom */
    }

    .footer-content {
      display: inline-flex; /* Use flexbox to align icon and text */
      align-items: center; /* Vertically center the icon and text */
      gap: 10px; /* Space between icon and text */
    }

    /* Smooth scrolling for the entire page */
    html {
      scroll-behavior: smooth;
    }
  </style>
</head>
<body>
  <div class="top_box clearfix">
    <div class="top_box_inner_1 clearfix">
      <section id="header">
        <nav class="navbar navbar-default">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand heading_tag" href="/home"><i class="fa-solid fa-leaf"></i>GREEN TUNISIA</a>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
              <li>
                <a class="tag_menu active_tab" href="/home">HOME</a>
              </li>
              <li>
                <a class="tag_menu" href="#welcome-section">ABOUT</a> <!-- Updated href to point to the welcome section -->
              </li>
              <li>
                <a class="tag_menu" href="/buy_sell">BUY & SELL</a>
              </li>
              <li>
                <a class="tag_menu" href="/garbage-trading">GARBAGE TRADING</a>
              </li>
              <li>
                <a class="tag_menu" href="/plastic-selling">SELL PLASTIC</a>
              </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li class="dropdown">
                <a class="tag_menu_righ" href="#" id="log-btn">
                  <i class="fa-solid fa-user" style="margin-right: 10px;"></i>
                  <span id="username">Username</span>
                  <i class="fas fa-caret-down"></i>
                </a>
                <div class="dropdown-content">
                  <a href="#" id="user-email"><i class="fas fa-envelope"></i><span>user@example.com</span></a>
                  <a href="#" id="logout-link"><i class="fas fa-sign-out-alt"></i><span>Logout</span></a>
                </div>
              </li>
            </ul>
            <script>
              document.addEventListener('click', function(event) {
                var dropdown = document.querySelector('.dropdown');
                var dropdownContent = document.querySelector('.dropdown-content');

                // Check if the click is outside the dropdown
                if (!dropdown.contains(event.target)) {
                  dropdownContent.style.display = 'none';
                }
              });
            </script>
          </div>
          <!-- /.navbar-collapse -->
        </nav>
      </section>
    </div>
    <div class="top_box_inner_2  clearfix">
      <section id="top" class="clearfix">
        <div class="top clearfix">
          <div class="top_main clearfix">
            <h4>Join us in protecting Tunisia's environment by recycling and trading waste</h4>
            <h2>Turn Your Waste into Wealth</h2>  <br> <br> 
            <ul>
              <li class="reading_1"><a href="#">START SELLING</a></li>
              <li class="reading_2"><a href="#">LOOK FOR BUYING</a></li>
            </ul>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- New Welcome Section -->
  <section id="welcome-section">
    <div class="flex-container">
      <div class="welcome-text welcome-text-part1">
        <p>Welcome to Green Tunisia, a revolutionary online marketplace dedicated to protecting the environment and promoting a cleaner, greener planet. In a world where waste is becoming an ever-growing problem, our platform offers a simple yet powerful solution: reducing waste by giving unused items a second life.</p>
        <p>At Green Tunisia, we believe that every item has value, even if it’s no longer needed by its original owner. Instead of throwing away perfectly usable items, our platform connects sellers with buyers who can find value in them. Whether it’s clothing, electronics, furniture, or household goods, our community of users is committed to reducing waste by reusing, repurposing, and recycling.</p>
        <p>But we don’t stop there. Recognizing the global challenge of plastic pollution, we’ve created a dedicated space for plastic sellers and </p>
      </div>
      <div class="welcome-video">
        <video controls>
          <source src="/images/vid.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>
    </div>
    <div class="welcome-text welcome-text-part2">
      <p>buyers to connect. By facilitating the exchange of recyclable plastics, we’re helping to keep these materials out of landfills and oceans while empowering individuals and businesses to profit from sustainable practices.</p>
      <p>For second-hand shoppers, Green Tunisia is a treasure trove of unique and affordable finds. Whether you’re looking for a vintage piece, a budget-friendly alternative, or simply want to shop sustainably, our platform makes it easy to discover items that align with your values.</p>
      <p>Join us in our mission to create a cleaner, more sustainable future. Together, we can reduce waste, support the circular economy, and make a positive impact on the environment—one transaction at a time. Welcome to Green Tunisia, where sustainability meets opportunity.</p>
    </div>
  </section>

  <!-- Footer Section -->
  <footer>
    <div class="footer-content">
      <i class="fa-regular fa-copyright"></i> 2025 Green Tunisia - All Rights Reserved
    </div>
  </footer>

  <script>
    const backendUrl = 'https://green-tunisia-h3ji.onrender.com';

    // Fetch user data from the backend
    async function fetchUserData() {
      try {
        console.log('Fetching user data...');
        const token = localStorage.getItem('token'); // Get the token from localStorage

        if (!token) {
          console.log('No token found. User is not logged in.'); // Log a message instead of redirecting
          return; // Stop further execution
        }

        const response = await fetch(`${backendUrl}/api/auth/user`, {
          headers: {
            Authorization: `Bearer ${token}`, // Include the token in the header
          },
        });

        if (response.ok) {
          const user = await response.json();
          console.log('User data fetched:', user);

          // Update the dropdown button with the user's data
          document.getElementById('username').textContent = user.username;
          document.getElementById('user-email').innerHTML = `<i class="fas fa-envelope"></i><span>${user.email}</span>`;
        } else {
          console.error('Failed to fetch user data:', response.status, response.statusText);
          console.log('User is not authenticated.'); // Log a message instead of redirecting
        }
      } catch (err) {
        console.error('Error fetching user data:', err);
        console.log('An error occurred while fetching user data.'); // Log a message instead of redirecting
      }
    }

    // Logout functionality
    const logoutLink = document.getElementById('logout-link');
    if (logoutLink) {
      logoutLink.addEventListener('click', (e) => {
        e.preventDefault();
        localStorage.removeItem('token'); // Remove the token
        window.location.href = '/login.html';
      });
    }

    // Call the function to fetch user data when the page loads
    fetchUserData();

    // Intersection Observer for the welcome section
    document.addEventListener("DOMContentLoaded", function () {
      const welcomeSection = document.getElementById("welcome-section");

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              welcomeSection.classList.add("visible");
            }
          });
        },
        {
          threshold: 0.2, // Trigger when 20% of the section is visible
        }
      );

      observer.observe(welcomeSection);
    });
  </script>
</body>
</html>
